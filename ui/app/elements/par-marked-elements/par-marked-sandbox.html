

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="par-marked-sandbox">
  <template>
    <style include="shared-styles"></style>

    <style>
    :host {
      display: inline-block;
      @apply(--layout-horizontal);
    }

    .markdown-html {
      background-color: #f5f5f5;
      margin: 5px;
      padding: 5px;
    }

    </style>

    <iron-ajax
      id="ajax"
      auto
      url="par-marked-sandbox.md"
      handle-as="text"
      on-response="_responseHandler" last-response="{{lastResponse}}"></iron-ajax>

    <!-- <paper-textarea value="{{value}}" class="flex"></paper-textarea> -->
    <iron-autogrow-textarea value="{{value}}" rows="10" class="flex"></iron-autogrow-textarea>

    <marked-element markdown="{{value}}" class="flex">
      <div class="markdown-html"></div>
    </marked-element>
  </template>


  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'par-marked-sandbox',

      observers: ['_valueChanged(value)'],

      _responseHandler: function() {
        this.value = this.lastResponse;
      },

      _valueChanged: function(value) {
        this.fire('sandbox-changed', {value: value, bubbles: false});
      },

      reload: function() {
        this.$.ajax.generateRequest();
      },

      clear: function() {
        this.value = '';
      }
    });
  })();
  </script>
</dom-module>
