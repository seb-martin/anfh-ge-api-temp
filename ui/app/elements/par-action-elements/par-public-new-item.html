<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="par-public-new-item">
  <template>

    <style include="shared-styles"></style>

    <style>
    :host {
      display: inline-block;
    }

    </style>

    <paper-icon-item>
      <iron-icon icon="icons:face" item-icon></iron-icon>
      <paper-item-body>
        <paper-input label="Public" value="{{value}}" on-keydown="_inputKeydown"></paper-input>
      </paper-item-body>
      <paper-icon-button icon="icons:add-circle" disabled="{{_computeAddDisabled(value)}}" on-tap="_addTap" alt="Ajouter" title="Ajouter"></paper-icon-button>
    </paper-icon-item>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'par-public-new-item',

      properties: {
        value: {
          type: String,
          notify: true,
          value: ''
        }
      },

      _computeAddDisabled: function(val) {
        return !(val && val.trim());
      },

      _inputKeydown: function(evt) {
        if (evt.keyCode === 13) {
          // 'Enter'
          this._addTap();
        }

      },
      _addTap: function() {
        this.fire('add-public', {public: this.value.trim()});
      }

    });
  })();
  </script>
</dom-module>
