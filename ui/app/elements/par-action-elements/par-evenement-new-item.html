<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="par-evenement-new-item">
  <template>

    <style include="shared-styles"></style>

    <style>
    :host {
      display: inline-block;
    }

    </style>

    <paper-icon-item id="creationItem">
      <iron-icon icon="icons:date-range" item-icon></iron-icon>

      <paper-item-body class="layout horizontal">
        <par-date-input label="Du" style="margin-right: 5px" value="{{value.debut}}"></par-date-input>
        <par-date-input label="Au" style="margin-right: 5px" value="{{value.fin}}"></par-date-input>
        <paper-input label="Ville" class="flex" value={{value.ville}}>
          <!-- Hack pour que la hauteur du paper-input soit identique Ã  celle des par-date-input -->
          <paper-icon-button suffix icon="icons:add-circle" style="visibility: hidden"></paper-icon-button>
        </paper-input>
      </paper-item-body>
      <paper-icon-button icon="icons:add-circle"  disabled="{{_computeDisabled(value.debut, value.fin)}}" on-tap="_addTap"></paper-icon-button>
    </paper-icon-item>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'par-evenement-new-item',

      properties: {
        value: {
          type: Object,
          notify: true,
          value: function() {
            return {
              debut: moment().format('YYYY-MM-DD'),
              fin: moment().format('YYYY-MM-DD')
            };
          }
        }
      },

      ready: function() {
      },

      _addTap: function() {
        this.fire('add-evenement', {evenement: this.value});
      },

      _computeDisabled: function(debut, fin) {

        return moment(debut).isAfter(moment(fin));
      }

    });
  })();
  </script>
</dom-module>
