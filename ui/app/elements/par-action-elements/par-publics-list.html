<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="par-publics-list">
  <template>
    <style include="shared-styles"></style>

    <style>
      :host {
        @apply(--layout-vertical);
      }

      paper-icon-item {
        padding: 0;
      }

    </style>


<!--    <template is="dom-if" if="{{_computeDisplayLabel()}}">
      Publics
    </template>
     -->    
    <template is="dom-repeat" items="{{publics}}">
      
      <paper-icon-item>
        <iron-icon icon="icons:face" item-icon></iron-icon>
        <span class="flex">{{item}}</span>
        <paper-icon-button icon="icons:remove-circle" on-tap="_removePublic" alt="Retirer" title="Retirer"></paper-icon-button>
      </paper-icon-item>
    </template>

    <paper-input id="publicInput" label="Public" no-label-float value="{{_newPublic}}">
      <iron-icon icon="icons:face" prefix></iron-icon>
      <paper-icon-button suffix disabled="{{_computeAddDisabled(_newPublic)}}" on-tap="_addPublic" icon="icons:add-circle" alt="Ajouter" title="Ajouter">
      </paper-icon-button>
    </paper-input>


  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'par-publics-list',

        behaviors: [
          Polymer.IronFormElementBehavior,
          Polymer.IronValidatableBehavior
        ],

        properties: {
          publics: {
            type: Array,
            value: [],
            observer: '_publicsChanged'
          }
        },

        ready: function() {

        },

        _addPublic: function() {
          this.push('publics', this._newPublic);
          this._newPublic = '';
        },

        _computeDisplayLabel: function() {
          return this.publics && this.publics.length > 0;
        },

        _computeAddDisabled: function(value) {
          return !value;
        },

        _removePublic: function(evt) {
          var model = evt.model;
          this.splice('publics', model.index, 1);
        },

        _publicsChanged: function() {
          if (!Array.isArray(this.publics)) {
            this.publics = [];
          }
        }
      });

    })();
  </script>

</dom-module>